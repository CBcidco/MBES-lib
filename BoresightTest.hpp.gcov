        -:    0:Source:test/BoresightTest.hpp
        -:    0:Graph:main.gcno
        -:    0:Data:-
        -:    0:Runs:0
        -:    0:Programs:0
        -:    1:/*
        -:    2: * To change this license header, choose License Headers in Project Properties.
        -:    3: * To change this template file, choose Tools | Templates
        -:    4: * and open the template in the editor.
        -:    5: */
        -:    6:
        -:    7:/* 
        -:    8: * File:   BoresightTest.hpp
        -:    9: * Author: emile
        -:   10: *
        -:   11: * Created on May 7, 2019, 9:49 AM
        -:   12: */
        -:   13:
        -:   14:#include <eigen3/Eigen/src/Core/Matrix.h>
        -:   15:
        -:   16:#include "catch.hpp"
        -:   17:#include "../src/math/Boresight.hpp"
        -:   18:#include "../src/utils/Constants.hpp"
        -:   19:
        -:   20:/*Test the Boresight::buildMatrix with the angles 0,0,0*/
    #####:   21:TEST_CASE("Test if the angles 0,0,0 return the matrix identity")
        -:   22:{
    #####:   23:    Attitude boresightAngles(0,0,0,0);
    #####:   24:    Eigen::Matrix3d boresight;
    #####:   25:    Boresight::buildMatrix(boresight,boresightAngles);
    #####:   26:    Eigen::Matrix3d matrixSearch;
    #####:   27:    matrixSearch << 1,0,0,
    #####:   28:                    0,1,0,
    #####:   29:                    0,0,1;
    #####:   30:    REQUIRE(boresight == matrixSearch);
    #####:   31:}
        -:   32:
        -:   33:/*Test the Boresight::buildMatrix with the angles 1,2,3*/
    #####:   34:TEST_CASE("Test with the angle 1,2,3")
        -:   35:{
    #####:   36:    Attitude boresightAngles(0,1,2,3);
    #####:   37:    Eigen::Matrix3d boresight;
    #####:   38:    Boresight::buildMatrix(boresight,boresightAngles);
    #####:   39:    Eigen::Matrix3d matrixSearch;
    #####:   40:    matrixSearch << 0.998021196624068,-0.0517197397456515,0.0357597484569552,
    #####:   41:                    0.0523040745924708,0.998509315434203,-0.0156022681730626,
    #####:   42:                    -0.0348994967025010,0.0174417749028302,0.999238614955483;
    #####:   43:    REQUIRE(abs(boresight(0,0)-matrixSearch(0,0))< 1e-10);
    #####:   44:    REQUIRE(abs(boresight(0,1)-matrixSearch(0,1))< 1e-10);
    #####:   45:    REQUIRE(abs(boresight(0,2)-matrixSearch(0,2))< 1e-10);
    #####:   46:    REQUIRE(abs(boresight(1,0)-matrixSearch(1,0))< 1e-10);
    #####:   47:    REQUIRE(abs(boresight(1,1)-matrixSearch(1,1))< 1e-10);
    #####:   48:    REQUIRE(abs(boresight(1,2)-matrixSearch(1,2))< 1e-10);
    #####:   49:    REQUIRE(abs(boresight(2,0)-matrixSearch(2,0))< 1e-10);
    #####:   50:    REQUIRE(abs(boresight(2,1)-matrixSearch(2,1))< 1e-10);
    #####:   51:    REQUIRE(abs(boresight(2,2)-matrixSearch(2,2))< 1e-10);
    #####:   52:}
        -:   53:
        -:   54:/*Test the Boresight::buildMatrix with the angles 10,26,39*/
    #####:   55:TEST_CASE("Test with the angle 10,26,39")
        -:   56:{
    #####:   57:    Attitude boresightAngles(0,10,26,39);
    #####:   58:    Eigen::Matrix3d boresight;
    #####:   59:    Boresight::buildMatrix(boresight,boresightAngles);
    #####:   60:    Eigen::Matrix3d matrixSearch;
    #####:   61:    matrixSearch << 0.698494163262967,-0.560601422747957,0.444783035535905,
    #####:   62:                    0.565629420690258,0.813244715626515,0.136734746700144,
    #####:   63:                    -0.438371146789077,0.156073948237737,0.885139345156633;
    #####:   64:    REQUIRE(abs(boresight(0,0)-matrixSearch(0,0))< 1e-10);
    #####:   65:    REQUIRE(abs(boresight(0,1)-matrixSearch(0,1))< 1e-10);
    #####:   66:    REQUIRE(abs(boresight(0,2)-matrixSearch(0,2))< 1e-10);
    #####:   67:    REQUIRE(abs(boresight(1,0)-matrixSearch(1,0))< 1e-10);
    #####:   68:    REQUIRE(abs(boresight(1,1)-matrixSearch(1,1))< 1e-10);
    #####:   69:    REQUIRE(abs(boresight(1,2)-matrixSearch(1,2))< 1e-10);
    #####:   70:    REQUIRE(abs(boresight(2,0)-matrixSearch(2,0))< 1e-10);
    #####:   71:    REQUIRE(abs(boresight(2,1)-matrixSearch(2,1))< 1e-10);
    #####:   72:    REQUIRE(abs(boresight(2,2)-matrixSearch(2,2))< 1e-10);
    #####:   73:}
        -:   74:
        -:   75:/*Test the Boresight::buildMatrix with the angles 56,67,91*/
    #####:   76:TEST_CASE("Test with the angle 56,67,91")
        -:   77:{
    #####:   78:    Attitude boresightAngles(0,56,67,91);
    #####:   79:    Eigen::Matrix3d boresight;
    #####:   80:    Boresight::buildMatrix(boresight,boresightAngles);
    #####:   81:    Eigen::Matrix3d matrixSearch;
    #####:   82:    matrixSearch << -0.00681919846209329,-0.572426244871090,0.819927858238222,
    #####:   83:                    0.390671618245856,0.753257618534275,0.529130084967049,
    #####:   84:                    -0.920504853452440,0.323930786284440,0.218494074216318;
    #####:   85:    REQUIRE(abs(boresight(0,0)-matrixSearch(0,0))< 1e-10);
    #####:   86:    REQUIRE(abs(boresight(0,1)-matrixSearch(0,1))< 1e-10);
    #####:   87:    REQUIRE(abs(boresight(0,2)-matrixSearch(0,2))< 1e-10);
    #####:   88:    REQUIRE(abs(boresight(1,0)-matrixSearch(1,0))< 1e-10);
    #####:   89:    REQUIRE(abs(boresight(1,1)-matrixSearch(1,1))< 1e-10);
    #####:   90:    REQUIRE(abs(boresight(1,2)-matrixSearch(1,2))< 1e-10);
    #####:   91:    REQUIRE(abs(boresight(2,0)-matrixSearch(2,0))< 1e-10);
    #####:   92:    REQUIRE(abs(boresight(2,1)-matrixSearch(2,1))< 1e-10);
    #####:   93:    REQUIRE(abs(boresight(2,2)-matrixSearch(2,2))< 1e-10);
    #####:   94:}
